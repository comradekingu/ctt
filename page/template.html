<head>
    <title>Corona Tracker Tracker</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>

<body class="container">
    <span class="heading">
        <h1>Corona Tracker Tracker</h1>
        <div>updated hourly:
            <a href="https://github.com/janpf/ctt/actions" target="_blank">
                <img style="vertical-align:middle" src="https://github.com/janpf/ctt/workflows/update%20page/badge.svg">
            </a>
            <br>
            source code <a href="https://github.com/janpf/ctt" target="_blank">here</a>, raw data below
        </div>
    </span>
    <div>
        <br>
        Thanks to <a href="https://github.com/mh-" target="_blank">mh-</a> for building the <a
            href="https://github.com/mh-/diagnosis-keys" target="_blank">parser</a>
        <br>
        More raw data can be found here:
        <a href="https://cwa.malte.io/tek.csv" target="_blank">[CSV]</a>
        <a href="https://cwa.malte.io/tek.json" target="_blank">[JSON]</a>
        <a href="https://cwa.malte.io/tek.xlsx" target="_blank">[XLSX]</a>
        thanks to <a href="https://twitter.com/malteaero/status/1276458483039105024" target="_blank">Malte Janduda</a>
        <br>
        Alternative dashboard by <a href="https://github.com/micb25" target="_blank">Michael BÃ¶hme</a> available <a
            href="https://micb25.github.io/dka/" target="_blank">here</a>
    </div>
    <div id="validVis" class="left"></div>
    <script type="text/javascript">
        var spec = "./plots/valid.json";
        vegaEmbed('#validVis', spec).then(function (result) {
        }).catch(console.error);
    </script>
    <div id="publishedVis" class="right"></div>
    <script type="text/javascript">
        var spec = "./plots/published.json";
        vegaEmbed('#publishedVis', spec).then(function (result) {
        }).catch(console.error);
    </script>

    <div id="validByRiskVis" class="left"></div>
    <script type="text/javascript">
        var spec = "./plots/validByRisk.json";
        vegaEmbed('#validByRiskVis', spec).then(function (result) {
        }).catch(console.error);
    </script>
    <div id="publishedByRiskVis" class="right"></div>
    <script type="text/javascript">
        var spec = "./plots/publishedByRisk.json";
        vegaEmbed('#publishedByRiskVis', spec).then(function (result) {
        }).catch(console.error);
    </script>

    <div id="usercountVis" class="left"></div>
    <script type="text/javascript">
        var spec = "./plots/usercount.json";
        vegaEmbed('#usercountVis', spec).then(function (result) {
        }).catch(console.error);
    </script>
    <div id="userPublishedByCountVis" class="right"></div>
    <script type="text/javascript">
        var spec = "./plots/userPublishedByCount.json";
        vegaEmbed('#userPublishedByCountVis', spec).then(function (result) {
        }).catch(console.error);
    </script>

    <div class="tabs">
        {% for date in dates %}
        <div class="tab">
            <input type="radio" id="{{ date }}" name="date-group" checked>
            <label for="{{ date }}">{{ date }}</label>
            <div class="content">
                <div class="tabs">
                    <div class="tab">
                        <input type="radio" id="{{ date }}-txt" name="{{ date }}-group-nested" checked>
                        <label for="{{ date }}-txt">plaintext</label>
                        <div class="content">
                            <a href="/plaintext/{{ date }}.txt" target="_blank">download</a>
                            <button
                                onClick="document.getElementById('plaintext{{ date }}').setAttribute('data', '/plaintext/{{ date }}.txt')">display</button>
                            <object id="plaintext{{ date }}" type="text/plain" height="100%" width="100%"></object>
                        </div>
                    </div>
                    <div class="tab">
                        <input type="radio" id="{{ date }}-users" name="{{ date }}-group-nested">
                        <label for="{{ date }}-users">approx. users</label>
                        <div class="content">
                            <a href="/users/{{ date }}.txt" target="_blank">download</a>
                            <button
                                onClick="document.getElementById('users{{ date }}').setAttribute('data', '/users/{{ date }}.txt')">display</button>
                            <object id="users{{ date }}" type="text/plain" height="100%" width="100%"></object>
                        </div>
                    </div>
                    <div class="tab">
                        <input type="radio" id="{{ date }}-json" name="{{ date }}-group-nested">
                        <label for="{{ date }}-json">json</label>
                        <div class="content">
                            <a href="/json/{{ date }}.json" target="_blank">download</a>
                            <button
                                onClick="document.getElementById('json{{ date }}').setAttribute('data', '/json/{{ date }}.json')">display</button>
                            <object id="json{{ date }}" type="text/json" height="100%" width="100%"></object>
                        </div>
                    </div>
                    <div class="tab">
                        <input type="radio" id="{{ date }}-zip" name="{{ date }}-group-nested">
                        <label for="{{ date }}-zip">raw binary</label>
                        <div class="content">
                            <a href="/keys/{{ date }}.zip" target="_blank">download</a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
